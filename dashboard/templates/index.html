<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Paper Dashboard</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <h1>E-Paper Dashboard</h1>
    <form id="layout-form" action="/set_layout" method="post">
        <button type="button" data-layout="weather">Weather Layout</button>
        <button type="button" data-layout="clock">Clock Layout</button>
    </form>

    <script>
        document.querySelectorAll('#layout-form button').forEach(button => {
            button.addEventListener('click', () => {
                const layout = button.dataset.layout;
        
                fetch('/set_layout', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: `layout=${layout}`
                }).then(res => console.log(`Layout set to ${layout}`))
                  .catch(err => console.error(err));
            });
        });
    </script>

    <form id="image-form" action="/display_image" method="post" enctype="multipart/form-data">
        <input type="file" name="image" id="image-input" style="display:none">
        <button type="button" id="upload-button">Upload image</button>
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const uploadButton = document.getElementById('upload-button');
            const fileInput = document.getElementById('image-input');
            uploadButton.addEventListener('click', () => {fileInput.click();});
            fileInput.addEventListener('change', () => {
                const formData = new FormData(document.getElementById('image-form'));
                fetch('/display_image', {
                    method: 'POST',
                    body: formData
                }).then(res => console.log("Image uploaded"))
                .catch(err => console.error(err));
            });
        });
    </script>
</body>
</html>
