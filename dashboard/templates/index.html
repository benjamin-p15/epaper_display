<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Paper Dashboard</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <h1>E-Paper Dashboard</h1>
    <form id="layout-form" action="/set_layout" method="post">
        <button type="button" data-layout="weather">Weather Layout</button>
        <button type="button" data-layout="clock">Clock Layout</button>
    </form>

    <script>
        document.querySelectorAll('#layout-form button').forEach(button => {
            button.addEventListener('click', () => {
                const layout = button.dataset.layout;
        
                fetch('/set_layout', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/x-www-form-urlencoded'},
                    body: `layout=${layout}`
                }).then(res => console.log(`Layout set to ${layout}`))
                  .catch(err => console.error(err));
            });
        });
    </script>

    <form id="image-form" action="/display_image" method="post" enctype="multipart/form-data">
        <input type="file" name="image" id="image-input" style="display:none" required>
        <button type="button" id="upload-button">Choose Image</button>
        <button type="submit">Submit Image</button>
    </form>   

    <img id="image-preview" src="" alt="Preview" style="max-width: 400px; display:none; margin-top: 10px;">

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const uploadButton = document.getElementById('upload-button');
            const fileInput = document.getElementById('image-input');
            const preview = document.getElementById('image-preview');
            uploadButton.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', () => {
                const file = fileInput.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = e => {
                        preview.src = e.target.result;
                        preview.style.display = "block";
                    };
                    reader.readAsDataURL(file);
                }
            });
        });
        </script>
</body>
</html>
